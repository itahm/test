<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>dialog</title>
		
		<style>
td, input, label, h2, select {
	font-family: tahoma, arial, "맑은 고딕";
}

td, input, label, select, li {
	font-size: 14px;
}

body {
	margin: 0;
	padding: 0;
	position: fixed; top: 0; right: 0; bottom: 0; left: 0;
	display: flex;
	flex-direction:row;
	justify-content: center;
	align-items: center;
	background-color: rgba(255, 255, 255, .9);
}

section {
	padding: 20px;
	background-color: #fff;
	box-shadow: 0px 0px 20px 10px #ddd;
}

article {
	width: 480px;
	display: flex;
	justify-content: space-around;
}

article > div {
	width: 200px;
}

select {
	padding: .5em;
	width: 100%;
	box-sizing: border-box;
}

input[type="reset"],
input[type="submit"] {
	width: 100px;
	padding: .5em;
}

footer {
	margin-top: 20px;
	text-align: right;
}
		</style>
		
	</head>
	
	<body>
	
		<section>
			<form id="form">
				<article>
					<div>
						<h2 name="name1">peer1</h2>
						<select name="entry1" class="snmp" required></select>
					</div>
					<div>
						<h2 id="name2">peer2</h2>
						<select id="entry2" class="snmp" required></select>
					</div>
				</article>
				<footer>
					<input type="reset" value="cancel">
					<input type="submit" value="apply">
				</footer>
			</form>
		</section>
		
		<script>
if (parent === window) throw "";

(function (window, undefined){
	var peer1, peer2, ifEntry1, ifEntry2,
		form = document.getElementById("form");
	
	function initialize() {
		var peers = parent.getPeers();
		
		peer1 = peers.peer1;
		peer2 = peers.peer2;
		ifEntry1 = peer1.ifEntry;
		ifEntry2 = peer2.ifEntry;
		
		form.addEventListener("submit", function (e) {
			ifEntry1[form.elements["entry1"].value] = peer2.id;
			ifEntry2[form.elements["entry2"].value] = peer1.id;
			
			form.reset();
		});
		
		form.addEventListener("reset", function (e) {
			parent.closeDialog();
		});
		
		initInterface(form.elements["entry1"], ifEntry1);
		initInterface(form.elements["entry2"], ifEntry2);
	}
	
	function initInterface(select, entry) {
		var option;
		
		for (var name in entry) {
			if (entry[name]) {
				continue;
			}
			
			option = document.createElement("option");
			option.text = name;
			
			select.add(option);
		}
		
		select.value = "";
	}
	
	initialize();
	
}) (window);

		</script>
	
	</body>
	
</html>